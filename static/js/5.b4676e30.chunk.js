(this["webpackJsonpfrontend-test"]=this["webpackJsonpfrontend-test"]||[]).push([[5],{173:function(t,n,e){"use strict";var r=e(39),a=e(1),i=e(81);function o(t,n){var e=Object(a.useState)((function(){try{var e=localStorage.getItem(t);return e&&"undefined"!==e?JSON.parse(e):n}catch(r){return n}})),i=Object(r.a)(e,2),o=i[0],c=i[1];return[o,function(n){c(n);try{localStorage.setItem(t,JSON.stringify(n))}catch(e){}}]}n.a=function(){var t=Object(a.useContext)(i.a);if(void 0===t)throw new Error("Order Context must be initialized");var n=t.setSubTotal,e=t.setOrderCode,c=Object(a.useMemo)((function(){return null===t||void 0===t?void 0:t.subTotal}),[null===t||void 0===t?void 0:t.subTotal]),d=Object(a.useMemo)((function(){return null===t||void 0===t?void 0:t.orderCode}),[null===t||void 0===t?void 0:t.orderCode]),s=o("subTotal",0),u=Object(r.a)(s,2),l=u[0],j=u[1],b=o("orderCode",null),O=Object(r.a)(b,2),m=O[0],f=O[1];return Object(a.useEffect)((function(){l&&0===c&&n(l),m&&null===d?e(m):(c||d)&&(c&&j(c),d&&f(d))}),[c,l,d]),t}},188:function(t,n,e){"use strict";e.r(n),e.d(n,"ProductList",(function(){return X}));var r,a,i,o,c,d,s,u,l,j,b,O,m,f=e(172),v=e(39),p=e(1),g=e.n(p),h=e(190),x=e(23),y=e(43),I=Object(y.a)(r||(r=Object(x.a)(["\n  fragment ProductAssetsFragment on Asset {\n    id\n    name\n    source\n    preview\n  }\n"]))),E=Object(y.a)(a||(a=Object(x.a)(["\n  fragment CoreProductFieldsFragment on Product {\n    id\n    name\n  }\n"]))),C=Object(y.a)(i||(i=Object(x.a)(["\n  fragment ProductVariantFieldsFragment on ProductVariant {\n    id\n    name\n    productId\n    price\n    currencyCode\n  }\n"]))),P={fragments:{OrderModificationError:Object(y.a)(o||(o=Object(x.a)(["\n      fragment OrderModificationErrorFields on OrderModificationError {\n        message\n        errorCode\n      }\n    "]))),OrderLimitError:Object(y.a)(c||(c=Object(x.a)(["\n      fragment OrderLimitErrorFields on OrderLimitError {\n        message\n        errorCode\n        maxItems\n      }\n    "]))),NegativeQuantityError:Object(y.a)(d||(d=Object(x.a)(["\n      fragment NegativeQuantityErrorFields on NegativeQuantityError {\n        message\n        errorCode\n      }\n    "]))),InsufficientStockError:Object(y.a)(s||(s=Object(x.a)(["\n      fragment InsufficientStockErrorFields on InsufficientStockError {\n        message\n        errorCode\n      }\n    "])))}},F=Object(y.a)(u||(u=Object(x.a)(["\n  ","\n  ","\n  ","\n  query getProducts($take: Int, $skip: Int) {\n    products(options: { take: $take, skip: $skip }) {\n      items {\n        ...CoreProductFieldsFragment\n        variants {\n          ...ProductVariantFieldsFragment\n          product {\n            ...CoreProductFieldsFragment\n            description\n            assets {\n              ...ProductAssetsFragment\n            }\n          }\n        }\n      }\n      totalItems\n    }\n  }\n"])),I,E,C),k=e(176),w=e.n(k),S=e(178),N=e(193),T=e(194),V=e(195),M=e(187),$=e(191),L=e(79),Q=Object(L.a)($.a)(l||(l=Object(x.a)(["\n  margin: 3vh 3vw;\n  max-width: 450px;\n"]))),q=L.a.img(j||(j=Object(x.a)(["\n  width: 100%;\n"]))),A=e(54),J=e(192),z=Object(y.a)(b||(b=Object(x.a)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  mutation addItemToOrder($productVariantId: ID!, $quantity: Int!) {\n    addItemToOrder(productVariantId: $productVariantId, quantity: $quantity) {\n      __typename\n      ... on Order {\n        id\n        state\n        totalQuantity\n        total\n        code\n        lines {\n          id\n          quantity\n          productVariant {\n            ...ProductVariantFieldsFragment\n          }\n        }\n      }\n      ...OrderModificationErrorFields\n      ...OrderLimitErrorFields\n      ...NegativeQuantityErrorFields\n      ...InsufficientStockErrorFields\n    }\n  }\n"])),P.fragments.OrderModificationError,P.fragments.OrderLimitError,P.fragments.NegativeQuantityError,P.fragments.InsufficientStockError,C),D=e(173),_=e(82),B=e(4),K=function(t){var n=t.variant,e=t.productName,r=n.product.description,a=n.id,i=n.price,o=n.currencyCode,c=n.name,d=n.product.assets[0].source,s=Object(D.a)(),u=s.setSubTotal,l=s.setCartItems,j=s.setOrderCode,b=Object(J.a)(z,{onCompleted:function(t){var n=t.addItemToOrder;"AddingItems"===(null===n||void 0===n?void 0:n.state)&&(null===n||void 0===n?void 0:n.total)&&(u(null===n||void 0===n?void 0:n.total),l((null===n||void 0===n?void 0:n.lines)||[]),j(n.code))}}),O=Object(v.a)(b,1)[0],m=function(){var t=Object(S.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,O({variables:{productVariantId:a,quantity:1}});case 3:alert(_.b);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return Object(B.jsxs)(Q,{variant:"outlined","data-testid":"product-variant-card-".concat(e),children:[Object(B.jsxs)(N.a,{children:[Object(B.jsx)(T.a,{color:"textSecondary",gutterBottom:!0,children:e}),Object(B.jsx)(T.a,{variant:"h5",component:"h2",children:c}),Object(B.jsx)(T.a,{variant:"body2",component:"p",children:r})]}),Object(B.jsx)(q,{src:d,alt:c}),Object(B.jsxs)(V.a,{children:[Object(B.jsxs)(T.a,{children:["Price: ","".concat(i," ").concat(o)]}),Object(B.jsx)(M.a,{size:"small",onClick:m,children:A.c})]})]})},G=e(167),H=L.a.nav(O||(O=Object(x.a)(["\n  display: flex;\n  flex-wrap: nowrap;\n  align-content: center;\n  justify-content: space-between;\n  align-items: center;\n  margin: 5vh 3vw;\n"]))),R=g.a.memo((function(t){var n=t.currentPage,e=t.totalPages,r=t.setPage;return Object(B.jsxs)(H,{role:"navigation","aria-label":"Pagination Navigation",children:[Object(B.jsx)(M.a,{disabled:0===n,onClick:function(){return r((function(t){return t-1}))},children:"Previous"}),Object(B.jsxs)(T.a,{variant:"h6","aria-label":"".concat("Current Page"," ").concat(n),children:["Page"," ",n+1," / ",e]}),Object(B.jsx)(M.a,{disabled:n>=e-1,onClick:function(){return r((function(t){return t+1}))},children:"Next"})]})})),U=Object(L.a)(G.a)(m||(m=Object(x.a)(["\n  &&& {\n    max-width: 400px;\n  }\n"]))),W=e(90);function X(){var t=Object(p.useState)(0),n=Object(v.a)(t,2),e=n[0],r=n[1],a=Object(h.a)(F,{variables:{take:A.b,skip:A.b*e}}),i=a.data,o=a.loading,c=a.error,d=Math.round(((null===i||void 0===i?void 0:i.products.totalItems)||0)/A.b),s=((null===i||void 0===i?void 0:i.products.items)||[]).reduce((function(t,n){var e=n.name,r=n.variants.map((function(t){return Object(f.a)(Object(f.a)({},t),{},{productName:e})}));return t[e]=r,t}),{});return o?Object(B.jsx)(W.a,{type:A.a.SKELETON,skeletonQuantity:8}):c?Object(B.jsx)("h2",{children:_.a}):Object(B.jsxs)("div",{children:[Object.entries(s).map((function(t){var n=Object(v.a)(t,2),e=n[0],r=n[1];return Object(B.jsxs)("div",{children:[Object(B.jsx)(T.a,{variant:"h5","data-testid":"product-name",children:e}),Object(B.jsx)(G.a,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:r.map((function(t){return Object(B.jsx)(U,{item:!0,xs:12,children:Object(B.jsx)(K,{variant:t,productName:e})},t.id)}))})]},e)})),Object(B.jsx)(R,{currentPage:e,totalPages:d,setPage:r})]})}}}]);
//# sourceMappingURL=5.b4676e30.chunk.js.map